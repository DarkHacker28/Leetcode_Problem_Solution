class Solution {
public:
    vector<int> constructTransformedArray(vector<int>& nums) {
        const int n=nums.size(), bias=511, bMask=1023;
        const int mbias=bias%n;
        for(int& x: nums) x+=bias;
        for(int i=0; i<n; i++){
            int j=(i+nums[i]-mbias+n)%n; 
            nums[i]+=((nums[j]& bMask)-bias)<<10;
        }
        for( int& x: nums) x>>=10;
        return nums;
    }
};
